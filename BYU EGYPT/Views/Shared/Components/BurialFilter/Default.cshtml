@{
}
@model IQueryable<BYU_EGYPT.Models.ViewModel.burialViewModel>

<style>
    .filter-header {
        background-color: #f1f1f1;
        padding: 10px;
    }
    .filter-body {
        padding: 10px;
    }
    .filter-group {
            margin-bottom: 10px;
        }
    .filter-group-header {
            background-color: #f1f1f1;
            padding: 10px;
        }
    .filter-group-body {
            padding: 10px;
        }
    .filter-list {
            column-count: 3;
            column-gap: 10px;
            display: flex;
            flex-wrap: wrap;
        }
    .filter-list-item {
        display: inline-block;
        margin-right: 1px;
        width: 150px;
        }
    .filter-checkbox {
            margin-right: 5px;
        }
    .filter-footer {
            background-color: #f1f1f1;
            padding: 10px;
        }
    .btn {
                padding: 10px;
                margin-right: 10px;
            }
</style>

<div class="filter-header" id="filtersContainer">
    <a href="#" onclick="toggleDropdown('filtersContainer', 'filtersDropdown'); return false;" style="color: black; text-decoration: none;">
        Filters <i class="arrow down"></i>
    </a>
</div>

<div class="container" id="filtersDropdown">
    <div class="row">
        <div class="col-4">
                <h4>Excavation Year</h4>
                <select id="excavationYearFilter">
                    <option></option>
                    <option value="1992">1992</option>
                    <option value="2002">2002</option>
                </select>
        </div>
        <div class="col-4">
                <h4>Location</h4>
                <select id="locationFilter">
                    <option></option>
                <option value="180 N 40 E NE">180 N 40 E NE</option>
                </select>
        </div>
        <div class="col-4">
                <h4>Burial Number</h4>
                <select id="burialNumberFilter">
                    <option></option>
                    @foreach (var burial in Model)
                    {
                        <option value="@burial.BurialNumber">@burial.BurialNumber</option>
                    }
                </select>
        </div>
    </div>
    <br />
    <div>
        <button onclick="filterTable()">GO!</button>
        <button onclick="clearFilters()">Clear Filters</button>
    </div>
</div>

@*     <div class="filter-footer">
        <button id="burial-filter-apply" class="btn btn-primary" asp-controller="Home" asp-action="BurialTable" asp-route-BurialNumberID="">Apply</button>
        @*         <button id="burial-filter-apply" class="btn btn-primary" onclick="window.location.href='@Url.Action("BurialTable", "Home", new { BurialNumberID = burial.BurialNumber })';" style="cursor:pointer">Apply</button>
                <button id="burial-filter-clear" class="btn btn-secondary">Clear</button>
    </div> *@

<script>
    function filterTable() {
        var excavationYearFilter = document.getElementById("excavationYearFilter").value;
        var locationFilter = document.getElementById("locationFilter").value;
        var burialNumberFilter = document.getElementById("burialNumberFilter").value;

        var tableRows = document.getElementById("burialTable").getElementsByTagName("tbody")[0].getElementsByTagName("tr");

        for (var i = 0; i < tableRows.length; i++) {
            var row = tableRows[i];
            var cells = row.getElementsByTagName("td");
            var excavationYear = cells[0].innerText;
            var location = cells[1].innerText;
            var burialNumber = cells[2].innerText;

            var showRow = true;

            if (excavationYearFilter !== '' && excavationYear !== excavationYearFilter) {
                showRow = false;
            }
            if (locationFilter !== '' && location !== locationFilter) {
                showRow = false;
            }
            if (burialNumberFilter !== '' && burialNumber !== burialNumberFilter) {
                showRow = false;
            }

            if (showRow) {
                row.style.display = "";
            } else {
                row.style.display = "none";
            }
        }
    }

    function clearFilters() {
        document.getElementById("excavationYearFilter").value = '';
        document.getElementById("locationFilter").value = '';
        document.getElementById("burialNumberFilter").value = '';

        filterTable();
    }
</script>

<script>
    function toggleDropdown(dropdownId, contentId) {
        removeAllHighlights();

        var dropdown = document.getElementById(dropdownId);
        dropdown.classList.toggle('open');
        var dropdownContent = document.getElementById(contentId);

        if (dropdown.classList.contains("open")) {
            var dropdownHeight = dropdownContent.offsetHeight;
            dropdown.style.marginBottom = dropdownHeight + "px";
        } else {
            dropdown.style.marginBottom = "0";
        }
    }</script>